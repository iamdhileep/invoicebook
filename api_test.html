<!DOCTYPE html>
<html>
<head>
    <title>Time Tracking API Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .response { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 3px; font-family: monospace; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Time Tracking System - API Test Interface</h1>
    
    <div class="test-section">
        <h3>1. Basic Stats Test</h3>
        <button onclick="testRefreshStats()">Test Refresh Stats</button>
        <div id="statsResult" class="response"></div>
    </div>
    
    <div class="test-section">
        <h3>2. Manager Tools Tests</h3>
        <button onclick="testTeamCounts()">Test Team Counts</button>
        <button onclick="testTeamAttendance()">Test Team Attendance</button>
        <button onclick="testEmployees()">Test Get Employees</button>
        <div id="managerResult" class="response"></div>
    </div>
    
    <div class="test-section">
        <h3>3. Smart Attendance Tests</h3>
        <button onclick="testManualCheckIn()">Test Manual Check-in</button>
        <button onclick="testIPCheckIn()">Test IP Check-in</button>
        <div id="attendanceResult" class="response"></div>
    </div>
    
    <div class="test-section">
        <h3>4. Bulk Operations Tests</h3>
        <button onclick="testBulkApproval()">Test Bulk Approval</button>
        <button onclick="testBulkReject()">Test Bulk Reject</button>
        <div id="bulkResult" class="response"></div>
    </div>

    <script>
        function makeApiRequest(action, resultDiv) {
            const formData = new FormData();
            formData.append('action', action);
            
            fetch('api/time_tracking_api.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById(resultDiv).innerHTML = 
                    `<strong>✓ Success:</strong>\n${JSON.stringify(data, null, 2)}`;
                document.getElementById(resultDiv).parentElement.className = 'test-section success';
            })
            .catch(error => {
                document.getElementById(resultDiv).innerHTML = 
                    `<strong>✗ Error:</strong>\n${error.message}`;
                document.getElementById(resultDiv).parentElement.className = 'test-section error';
            });
        }
        
        function testRefreshStats() {
            makeApiRequest('refresh_stats', 'statsResult');
        }
        
        function testTeamCounts() {
            makeApiRequest('get_team_counts', 'managerResult');
        }
        
        function testTeamAttendance() {
            makeApiRequest('get_team_attendance', 'managerResult');
        }
        
        function testEmployees() {
            makeApiRequest('get_employees', 'managerResult');
        }
        
        function testManualCheckIn() {
            makeApiRequest('manual_checkin', 'attendanceResult');
        }
        
        function testIPCheckIn() {
            makeApiRequest('ip_checkin', 'attendanceResult');
        }
        
        function testBulkApproval() {
            makeApiRequest('bulk_approve_attendance', 'bulkResult');
        }
        
        function testBulkReject() {
            makeApiRequest('bulk_reject_attendance', 'bulkResult');
        }
    </script>
</body>
</html>
