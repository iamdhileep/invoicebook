<!DOCTYPE html>
<html>
<head>
    <title>BillBook Application Status</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .status-card { background: white; padding: 20px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { color: #28a745; } .error { color: #dc3545; } .warning { color: #ffc107; } .info { color: #17a2b8; }
        .test-btn { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; margin: 5px; cursor: pointer; }
        .test-btn:hover { background: #0056b3; }
        .result { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 4px; border-left: 4px solid #007bff; }
        iframe { width: 100%; height: 300px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ BillBook Application Status Check</h1>
        
        <div class="status-card">
            <h2>üîê 1. Authentication System</h2>
            <p><strong>Login Credentials:</strong> admin / admin123</p>
            <button class="test-btn" onclick="testLogin()">Test Login Process</button>
            <div id="loginResult" class="result" style="display:none;"></div>
        </div>

        <div class="status-card">
            <h2>üìä 2. Dashboard Access</h2>
            <iframe src="login.php" id="loginFrame"></iframe>
            <p><em>‚Üë This should show the login form. Try logging in with admin/admin123</em></p>
        </div>

        <div class="status-card">
            <h2>‚è∞ 3. Advanced Attendance System</h2>
            <button class="test-btn" onclick="testAttendancePage()">Test Attendance Page</button>
            <button class="test-btn" onclick="testPunchOperations()">Test Punch In/Out</button>
            <div id="attendanceResult" class="result" style="display:none;"></div>
        </div>

        <div class="status-card">
            <h2>üîß 4. Quick Action Tests</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                <a href="http://localhost/billbook/" target="_blank" class="test-btn">üè† Home Page</a>
                <a href="http://localhost/billbook/login.php" target="_blank" class="test-btn">üîë Login Page</a>
                <a href="http://localhost/billbook/pages/dashboard/dashboard.php" target="_blank" class="test-btn">üìä Dashboard</a>
                <a href="http://localhost/billbook/advanced_attendance.php" target="_blank" class="test-btn">‚è∞ Attendance</a>
            </div>
        </div>

        <div class="status-card">
            <h2>üìã Common Issues & Solutions</h2>
            <div style="background: #fff3cd; padding: 15px; border-radius: 4px; border-left: 4px solid #ffc107;">
                <h4>If you see problems:</h4>
                <ul>
                    <li><strong>Login page shows but login fails:</strong> Database connection issue</li>
                    <li><strong>White/blank pages:</strong> PHP errors - check XAMPP control panel</li>
                    <li><strong>Punch buttons don't work:</strong> JavaScript/AJAX issues</li>
                    <li><strong>Page not found errors:</strong> Apache not running or wrong URL</li>
                    <li><strong>Permission denied:</strong> File/folder permission issues</li>
                </ul>
            </div>
        </div>

        <div class="status-card">
            <h2>üí° Tell Me Specifically</h2>
            <div style="background: #e8f5e8; padding: 15px; border-radius: 4px; border-left: 4px solid #28a745;">
                <p><strong>To help you better, please tell me:</strong></p>
                <ol>
                    <li>Which specific page/feature is not working?</li>
                    <li>What happens when you try to use it?</li>
                    <li>Do you see any error messages?</li>
                    <li>At what step does it fail?</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        async function testLogin() {
            const result = document.getElementById('loginResult');
            result.style.display = 'block';
            result.innerHTML = '‚è≥ Testing login process...';
            
            try {
                // Test if login page loads
                const loginResponse = await fetch('login.php');
                if (!loginResponse.ok) {
                    throw new Error('Login page not accessible');
                }
                
                result.innerHTML = '‚úÖ Login page accessible<br>üëâ Try logging in manually with admin/admin123';
            } catch (error) {
                result.innerHTML = '‚ùå Error: ' + error.message;
            }
        }

        async function testAttendancePage() {
            const result = document.getElementById('attendanceResult');
            result.style.display = 'block';
            result.innerHTML = '‚è≥ Testing attendance page...';
            
            try {
                const response = await fetch('advanced_attendance.php');
                if (response.status === 302) {
                    result.innerHTML = '‚ö†Ô∏è Redirected to login (need to login first)';
                } else if (response.ok) {
                    result.innerHTML = '‚úÖ Attendance page accessible';
                } else {
                    result.innerHTML = '‚ùå HTTP ' + response.status + ': ' + response.statusText;
                }
            } catch (error) {
                result.innerHTML = '‚ùå Error: ' + error.message;
            }
        }

        async function testPunchOperations() {
            const result = document.getElementById('attendanceResult');
            result.style.display = 'block';
            result.innerHTML = '‚è≥ Testing punch operations...';
            
            try {
                const response = await fetch('advanced_attendance.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        action: 'punch_in',
                        employee_id: 23,
                        attendance_date: new Date().toISOString().split('T')[0]
                    })
                });
                
                const text = await response.text();
                
                if (text.includes('login')) {
                    result.innerHTML = '‚ö†Ô∏è Need to login first to test punch operations';
                } else {
                    try {
                        const json = JSON.parse(text);
                        result.innerHTML = '‚úÖ Punch operation response: ' + JSON.stringify(json, null, 2);
                    } catch {
                        result.innerHTML = '‚ùå Invalid response: ' + text.substring(0, 200) + '...';
                    }
                }
            } catch (error) {
                result.innerHTML = '‚ùå Error: ' + error.message;
            }
        }
    </script>
</body>
</html>
